<%#unless @product.errors.empty? %>
  <%# @product.errors.messages %>
<%#end %>

<% unless flash[:success].nil? %>
  <div>
    <p class="alert alert-success">
      <%= flash[:success]%>
    </p>
  </div>
<% end %>

<% unless flash[:errors].nil? %>
  <%= render partial: "shared/errors", locals: {instance: @product} %>
<% end %>


<%= form_for @product, url: user_products_path(@merchant.id), method: :post, html: { class: "form" } do |f| %>

  <div class="form-group">
    <%= f.label :name %>
    <%= f.text_field :name %>
  </div>

  <div class="form-group">
    <%= f.label :price %>
    <%= f.text_field :price, placeholder: "$0.00" %>
  </div>

  <div class="form-group">
    <%= f.label :description %>
    <%= f.text_area :description %>
  </div>

  <div class="form-group">
    <%= f.label :photo_url %>
    <%= f.text_field :photo_url %>
  </div>

  <div class="form-group">
    <%= f.label :stock %>
    <%= f.number_field :stock, step: 1, value: 0 %>
  </div>

  <%= f.fields_for :product_categories do |pc| %>
    <div class="form-group">
      <%= pc.collection_select(:category_id, Category.all, :id, :name ) %>
      <%= pc.hidden_field :product_id, value: @product_id %>
    </div>
  <% end %> 

  <div class="form-group">
    <%= f.hidden_field :active, value: true %>
    <%= f.hidden_field :user_id, value: params[:user_id] %>
  </div>

  <%= f.submit "Create a Product", class: "btn btn-default" %>

<% end %>

<%= link_to "Create a new Category", new_category_path, method: :get, class: "btn btn-default" %>
